---
layout: default_ds_blog
title: "Hosting the WebGL Globe on a Local Web-Server With Python"
description: ""
Comment: "Hosting the WebGL Globe on a Local Web-Server With Python"
date: 2018-02-12
---

<div id="wrapper">
	<div id="blog-page" class="blogcontainer">

I recently came across <a href = "https://globe.chromeexperiments.com/">The WebGL Globe </a> released by the <a href = "https://experiments.withgoogle.com/chrome/globe"> Google Data Arts Team </a> 
and thought it would be cool to bring into some projects I was working on.
<br><br>
Heavily leveraging the Javascript <a href = "https://threejs.org/">three.js</a> 3D library it provides 
a nice, interactive rendering of (non-negative) measures by geographic location.    

This post steps through how to get this up and running on your machine including how to host this visual on a simple http web-server on your local machine using Python.
<br><br>

<h3>Step 1:</h3> Have a look at Google's example showing <a href = "http://globe.chromeexperiments.com/"> global population growth </a> in the 20th century. 
To display your data in this way you will need your input data arranged in a clunky json format as follows: <br><br>
[

<p style="text-indent: 40px">[<i>'seriesA', [ latitude, longitude, magnitude, latitude, longitude, magnitude, ... ] </i></p>

<p style="text-indent: 40px">]</p>

<p style="text-indent: 40px">[<i>'seriesB', [ latitude, longitude, magnitude, latitude, longitude, magnitude, ... ] </i></p>

<p style="text-indent: 40px">]</p>

<p style="text-indent: 40px">...</p>

]<br><br>

To transform your commercial data in this way will undoubtedly require some data engineering as well as a map of lat/long coordinates onto locations (___ provides a handy reference 
table for this). For example your data may look like: 

Additionally the 'seriesA', 'seriesB' labels in this input file will also need to reflected in an underlying <b>index.html</b> file as described below <br><br>

<h3>Step 2:</h3> Download the 'globe' folder from the Data Arts <a href = "https://github.com/dataarts/webgl-globe"> GitHub </a> page. The two files you will need to edit are: 
<b> index.html </b> which is what you will need to edit to 
customise the globe and <b> population909500.json </b> which is the input data file in json format described above.

Even if you are not super familiar with html (I'm certainly not!) you will see places to edit the output (e.g. line 4: Title, line 109: Copyrights. etc.) as well as the reference to the json input file (line 168. )

Step 3: Get this version runing on your machine. You will see that if you simply double-click on the index.html file you will get a static web-page with a spinning wheel and no globe. To get the globe to resolve you can host 
a local web server on your machine using python which will display the contents of the html file to you. Once you get this baseline version up and running the editing of index.html and the creation of your bespoke json input file are largely 
straight-forward to do.

The below python code sets up a local server on your machine:

<pre>
	<code class="python">
	#~~~~~~~~~~~~~~~~~~~~~~~~~~~
	# Sets up a local web server
	#~~~~~~~~~~~~~~~~~~~~~~~~~~~
	import http.server
	import socketserver

	PORT = 8000

	Handler = http.server.SimpleHTTPRequestHandler

	httpd = socketserver.TCPServer(("", PORT), Handler)

	print ("serving at port", PORT)
	httpd.serve_forever()

	#httpd.shutdown
	#httpd.server_close()
	</code>
</pre>

Save this python file <i> in the globe folder </i> (SimpleHTTPRequestHandler is, as the name suggests!, a simple HTTP request handler that serves files from the current director and any of its subdirectories). After running this python code, 
open Chrome and navigate to http://localhost:8000 You should see the full interactive globe now. 

By default the SimpleHTTPRequestHandler will be looking for a file called Index.html in the current directory. You can of course rename the file to something more meaningful to you, say to MyFirstGlobe.html, still in the same directory, and then simply navigate to http://localhost:8000/MyFirstGlobe.html

Step 4: Customise your version. To demonstrate this I've created a dummy html and corresponding input json file to demonstrate this. 

Step 5: Roll out more broadly
Of course once you're happy with your version and want to roll out more broadly within your organisation you have 2 options:

1. Send a couple of interested stakeholders a link to your locally hosted version to generate some buzz (this will likely result in performance issues if too many people query your machine)
2. Ask you IT department is they can host this on an internal html server for you 

Enjoy!

	</div>
</div>